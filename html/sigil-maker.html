<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sigil Generator - Mystical Path Tools</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#8b5cf6">
    
    <link rel="stylesheet" href="../css/shared-theme.css">
    <link rel="stylesheet" href="../css/sigil-styles.css">
    <link rel="stylesheet" href="../css/nav-menu.css">
    <link rel="stylesheet" href="../css/print.css">
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Tools</a>
        <header>
            <h1>‚ú¶ Sigil Generator ‚ú¶</h1>
            <p class="subtitle">Transform your intentions into mystical symbols</p>
            <div class="theme-selector">
                <label for="mystical-path">Mystical Path:</label>
                <select id="mystical-path">
                    <option value="chaos-magick" selected>Chaos Magick</option>
                    <option value="shadow-work">Shadow Work</option>
                    <option value="golden-dawn">Golden Dawn</option>
                    <option value="green-witchcraft">Green Witchcraft</option>
                    <option value="blood-moon">Blood Moon</option>
                    <option value="lunar-tides">Lunar Tides</option>
                </select>
            </div>
        </header>

        <main>
            <section class="input-section" role="region" aria-labelledby="intention-heading">
                <h2 id="intention-heading">Your Intention</h2>
                <p class="instructions">
                    Write your intention in the present tense (e.g., "I am confident", "I am successful").
                    Focus on one clear desire for best results.
                </p>
                <textarea 
                    id="intention-input" 
                    placeholder="I am..."
                    rows="3"
                    aria-label="Enter your intention for sigil creation"
                ></textarea>
                <button id="generate-btn">Generate Sigil</button>
            </section>

            <section class="output-section" id="output-section" style="display: none;" role="region" aria-labelledby="process-heading">
                <h2 class="sr-only" id="process-heading">Sigil Creation Process</h2>
                <div class="process-steps" role="list">
                    <div class="step">
                        <h3>Step 1: Original Intention</h3>
                        <div id="original-text" class="result-box"></div>
                    </div>

                    <div class="step" role="listitem">
                        <h3>Step 2: Remove Vowels</h3>
                        <div id="no-vowels" class="result-box"></div>
                        <p class="hint">Removed: A, E, I, O, U</p>
                    </div>

                    <div class="step" role="listitem">
                        <h3>Step 3: Remove Duplicates</h3>
                        <div id="no-duplicates" class="result-box"></div>
                        <p class="hint">Kept only unique consonants</p>
                    </div>

                    <div class="step final-step" role="listitem">
                        <h3>Step 4: Your Sigil Letters</h3>
                        <div id="final-letters" class="letter-grid" role="region" aria-label="Final sigil letters for combining"></div>
                        <p class="instructions">
                            Combine these letters into an abstract symbol. Let your intuition guide you 
                            in overlapping and arranging them. You can draw this on paper or use the canvas below.
                        </p>
                    </div>
                </div>

                <div class="canvas-section" role="region" aria-labelledby="canvas-heading">
                    <h3 id="canvas-heading">Create Your Sigil</h3>
                    <div class="canvas-controls">
                        <button id="auto-generate" aria-label="Automatically generate sigil from letters">‚ú® Auto-Generate</button>
                        <select id="generation-style" aria-label="Choose sigil generation style">
                            <option value="goetic" selected>Goetic Seal</option>
                            <option value="kamea">Kamea (Magic Square)</option>
                            <option value="galdrastafir">Galdrastafir (Icelandic)</option>
                            <option value="sigillum">Sigillum Dei</option>
                            <option value="veve">Veve (Vodou)</option>
                            <option value="geomancy">Geomancy (Arabic)</option>
                            <option value="iching">I Ching (Chinese)</option>
                            <option value="rosecross">Rose Cross (Golden Dawn)</option>
                            <option value="alchemical">Alchemical</option>
                            <option value="radial">Radial</option>
                            <option value="circular">Circular</option>
                            <option value="overlay">Overlay</option>
                            <option value="geometric">Geometric</option>
                            <option value="spiral">Spiral</option>
                        </select>
                        <button id="simplify-rune" aria-label="Simplify sigil to minimal rune style">‚ö° Simplify to Rune</button>
                        <button id="clear-canvas" aria-label="Clear canvas">Clear</button>
                        <button id="download-sigil" aria-label="Download sigil as PNG">Download</button>
                        <input type="color" id="color-picker" value="#8b5cf6" aria-label="Choose drawing color">
                        <input type="range" id="brush-size" min="2" max="20" value="3" aria-label="Adjust brush size">
                        <span id="brush-size-label">3px</span>
                    </div>
                    <p class="canvas-hint">Auto-generate creates the sigil for you, or draw manually below. Use "Simplify to Rune" for a minimal, linear version.</p>
                    <canvas id="sigil-canvas" width="600" height="600" aria-label="Canvas drawing area for sigil creation"></canvas>
                </div>

                <div class="activation-section" role="region" aria-labelledby="activation-heading">
                    <h3 id="activation-heading">Activating Your Sigil</h3>
                    <div class="activation-methods" role="list">
                        <div class="method" role="listitem">
                            <h4>üî• Destructible</h4>
                            <p>Draw on paper and burn it to release the energy into the universe.</p>
                        </div>
                        <div class="method" role="listitem">
                            <h4>‚è≥ Temporary</h4>
                            <p>Draw on your skin with marker, or carve into a candle that will melt.</p>
                        </div>
                        <div class="method" role="listitem">
                            <h4>‚ôæÔ∏è Permanent</h4>
                            <p>Create as art, jewelry, or tattoo. Recharge periodically to maintain energy.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Remember: The power lies in your intention and belief. ‚ú®</p>
        </footer>
    </div>

    <script src="../js/theme-manager.js"></script>
    <script src="../js/nav-menu.js"></script>
    <script src="../js/canvas-utils.js"></script>
    <script src="../js/sigil-script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((reg) => console.log('‚ú® SW registered:', reg.scope))
                    .catch((err) => console.log('SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
